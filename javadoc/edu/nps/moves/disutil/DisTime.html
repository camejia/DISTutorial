<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0) on Mon Jan 09 14:28:39 PST 2017 -->
<title>DisTime</title>
<meta name="date" content="2017-01-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DisTime";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../edu/nps/moves/disutil/DisMarshaller.TimestampStyle.html" title="enum in edu.nps.moves.disutil"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../edu/nps/moves/disutil/EulerConversions.html" title="class in edu.nps.moves.disutil"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?edu/nps/moves/disutil/DisTime.html" target="_top">Frames</a></li>
<li><a href="DisTime.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.nps.moves.disutil</div>
<h2 title="Class DisTime" class="title">Class DisTime</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>edu.nps.moves.disutil.DisTime</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DisTime</span>
extends java.lang.Object</pre>
<div class="block">DIS time units are a pain in the ass. DIS time units are arbitrary, and set
 equal to 2^31 - 1 time units per hour. The DIS time is set to the number of time
 units since the start of the hour. The timestamp field in the PDU header is
 four bytes long and is specified to be an unsigned integer value.<p>

 There are two types of official timestamps in the PDU header: absolute time and
 relative time. Absolute time is used when the host is sync'd to UTC, ie the host
 has access to UTC via Network Time Protocol (NTP). This time can be legitimately
 compared to the timestamp of packets received from other hosts, since they all
 refer to the same universal time.<p>

 Relative timestamps are used when the host does NOT have access to NTP, and hence
 the system time might not be coordinated with that of other hosts. This means that
 a host receiving DIS packets from several hosts might have to set up a per-host
 table to order packets, and that the PDU timestamp fields from one host is not
 directly comparable to the PDU timestamp field from another host.

 Absolute timestamps have their LSB set to 1, and relative timestamps have their
 LSB set to 0. The idea is to get the current time since the top of the hour,
 divide by 2^31-1, shift left one bit, then set the LSB to either 0 for relative
 timestamps or 1 for absolute timestamps.<p>

 The nature of the data is such that the timestamp fields will roll over once an
 hour, and simulations must be prepared for that. Ie, at the top of the hour
 outgoing PDUs will have a timestamp of 1, just before the end of the hour the
 PDUs will have a timestamp of 2^31 - 1, and then they will roll back over to 1.
 Receiving applications should expect this behavior, and not simply expect a
 monotonically increasing timestamp field.<p>

 The official DIS timestamps don't work all that well in our (NPS's) applications,
 which often expect a monotonically increasing timestamp field. To get around this,
 we use hundreds of a second since the start of the year. The maximum value for
 this field is 3,153,600,000, which can fit into an unsigned int. The resolution is
 good enough for most applications, and you typically don't have to worry about
 rollover, instead getting only a monotonically increasing timestamp value.<p>

 Note that many applications in the wild have been known to completely ignore
 the standard and to simply put the Unix time (seconds since 1970) into the
 field. <p>

 You need to be careful with the shared instance of this class--I'm not at all
 convinced it is thread safe. If you are using multiple threads, I suggest you
 create a new instance of the class for each thread to prevent the values from
 getting stomped on.<p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>DMcG</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#ABSOLUTE_TIMESTAMP_MASK">ABSOLUTE_TIMESTAMP_MASK</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.GregorianCalendar</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#cal">cal</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../edu/nps/moves/disutil/DisTime.html" title="class in edu.nps.moves.disutil">DisTime</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#disTime">disTime</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#RELATIVE_TIMESTAMP_MASK">RELATIVE_TIMESTAMP_MASK</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#DisTime--">DisTime</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#getDisAbsoluteTimestamp--">getDisAbsoluteTimestamp</a></span>()</code>
<div class="block">Returns the absolute timestamp, assuminng that this host is sync'd to NTP.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#getDisRelativeTimestamp--">getDisRelativeTimestamp</a></span>()</code>
<div class="block">Returns the DIS standard relative timestamp, which should be used if this host
 is not slaved to NTP.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="../../../../edu/nps/moves/disutil/DisTime.html" title="class in edu.nps.moves.disutil">DisTime</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#getInstance--">getInstance</a></span>()</code>
<div class="block">Shared instance.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#getNpsTimestamp--">getNpsTimestamp</a></span>()</code>
<div class="block">Returns a useful timestamp, hundredths of a second since the start of the year.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../edu/nps/moves/disutil/DisTime.html#getUnixTimestamp--">getUnixTimestamp</a></span>()</code>
<div class="block">Another option for marshalling with the timestamp field set automatically.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ABSOLUTE_TIMESTAMP_MASK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ABSOLUTE_TIMESTAMP_MASK</h4>
<pre>public static final&nbsp;int ABSOLUTE_TIMESTAMP_MASK</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#edu.nps.moves.disutil.DisTime.ABSOLUTE_TIMESTAMP_MASK">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="RELATIVE_TIMESTAMP_MASK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RELATIVE_TIMESTAMP_MASK</h4>
<pre>public static final&nbsp;int RELATIVE_TIMESTAMP_MASK</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#edu.nps.moves.disutil.DisTime.RELATIVE_TIMESTAMP_MASK">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="cal">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cal</h4>
<pre>protected&nbsp;java.util.GregorianCalendar cal</pre>
</li>
</ul>
<a name="disTime">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>disTime</h4>
<pre>public static&nbsp;<a href="../../../../edu/nps/moves/disutil/DisTime.html" title="class in edu.nps.moves.disutil">DisTime</a> disTime</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DisTime--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DisTime</h4>
<pre>public&nbsp;DisTime()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getInstance--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public static&nbsp;<a href="../../../../edu/nps/moves/disutil/DisTime.html" title="class in edu.nps.moves.disutil">DisTime</a>&nbsp;getInstance()</pre>
<div class="block">Shared instance. This is not thread-safe. If you are working in multiple threads,
 create a new instance for each thread.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>singleton instance of DisTime</dd>
</dl>
</li>
</ul>
<a name="getDisAbsoluteTimestamp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDisAbsoluteTimestamp</h4>
<pre>public&nbsp;int&nbsp;getDisAbsoluteTimestamp()</pre>
<div class="block">Returns the absolute timestamp, assuminng that this host is sync'd to NTP.
 Fix to bitshift by mvormelch.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>DIS time units, get absolute timestamp</dd>
</dl>
</li>
</ul>
<a name="getDisRelativeTimestamp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDisRelativeTimestamp</h4>
<pre>public&nbsp;int&nbsp;getDisRelativeTimestamp()</pre>
<div class="block">Returns the DIS standard relative timestamp, which should be used if this host
 is not slaved to NTP. Fix to bitshift by mvormelch</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>DIS time units, relative</dd>
</dl>
</li>
</ul>
<a name="getNpsTimestamp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNpsTimestamp</h4>
<pre>public&nbsp;long&nbsp;getNpsTimestamp()</pre>
<div class="block">Returns a useful timestamp, hundredths of a second since the start of the year.
 This effectively eliminates the need for receivers to handle timestamp rollover,
 as long as you're not working on New Year's Eve.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a timestamp in hundredths of a second since the start of the year</dd>
</dl>
</li>
</ul>
<a name="getUnixTimestamp--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getUnixTimestamp</h4>
<pre>public&nbsp;long&nbsp;getUnixTimestamp()</pre>
<div class="block">Another option for marshalling with the timestamp field set automatically. The UNIX
 time is conventionally seconds since January 1, 1970. UTC time is used, and leap seconds
 are excluded. This approach is popular in the wild, but the time resolution is not very
 good for high frequency updates, such as aircraft. An entity updating at 30 PDUs/second
 would see 30 PDUs sent out with the same timestamp, and have 29 of them discarded as
 duplicate packets.

 Note that there are other "Unix times", such milliseconds since 1/1/1970, saved in a long.
 This cannot be used, since the value is saved in a long. Java's System.getCurrentTimeMillis()
 uses this value.

 Unix time (in seconds) rolls over in 2038. 

 See the wikipedia page on Unix time for gory details.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>seconds since 1970</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../edu/nps/moves/disutil/DisMarshaller.TimestampStyle.html" title="enum in edu.nps.moves.disutil"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../edu/nps/moves/disutil/EulerConversions.html" title="class in edu.nps.moves.disutil"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?edu/nps/moves/disutil/DisTime.html" target="_top">Frames</a></li>
<li><a href="DisTime.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
